---
description: Details the responsibilities of the Simulator package (\@aztec/simulator\), focusing on ACIR execution and oracle handling for transaction simulation.
globs: 
alwaysApply: false
---
# Simulator Overview

Package: [`@aztec/simulator`](mdc:aztec-packages/yarn-project/simulator)

The Simulator is responsible for executing Aztec contract function calls *outside* of the proving system. It's used for transaction simulation and potentially by nodes for public function execution.

**Responsibilities:**

*   **ACIR Execution:** Interprets and executes ACIR (Abstract Circuit Intermediate Representation) bytecode generated by the Noir compiler.
*   **Oracle Handling:** Resolves oracle calls made by Noir circuits during execution. This involves fetching data from a data source (like a PXE or Node's world state view).
    *   Handles calls for private state (notes), public state, contract information, etc.
*   **State Management (Simulation):** Maintains a temporary view of the state (private and public) as it's modified during a simulation run.
*   **Execution Results:** Returns the results of function execution, including return values, new note commitments, nullifiers, logs ([`PrivateLogData`](mdc:aztec-packages/yarn-project/stdlib/src/kernel/private_log_data.ts)), public state changes, etc.
*   **Distinction between Private and Public Execution:** Handles both private function execution (requires access to private state via oracles) and public function execution (operates on public state).

It's a core dependency for the [`@aztec/pxe`](mdc:aztec-packages/yarn-project/pxe) (for simulating transactions) and potentially [`@aztec/aztec-node`](mdc:aztec-packages/yarn-project/aztec-node) (for executing the public parts of transactions).
